BOOTSTRAP: docker
FROM: python

%files

%post
################################# APT INSTALL #################################
apt-get update
apt-get install -y git netcdf-bin libnetcdf-dev libgl1-mesa-dev libglu1-mesa-dev libglew-dev libglm-dev libfreetype6-dev libxml2-dev libx11-dev libxext-dev libxrender-dev libpng-dev libjpeg-dev
apt-get clean
###############################################################################

################################# PYMOL ##################################
cd /opt
git clone https://github.com/schrodinger/pymol-open-source.git
cd pymol-open-source
# Set environment variables for compilation
export CFLAGS="-I/usr/include -I/usr/include/libpng -I/usr/include/libjpeg"
export LDFLAGS="-L/usr/lib"
# Install with proper compilation flags
pip install --no-cache-dir .
##########################################################################

%runscript
/usr/local/bin/pymol $@
