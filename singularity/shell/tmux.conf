set-option -g prefix C-a

# word separators for automatic word selection
setw -g word-separators ' @"=()[]'
setw -ag word-separators "'"


bind-key r split-window -c '#{pane_current_path}' -v ranger

# --------- Tmux open plugin https://github.com/tmux-plugins/tmux-open ---------
run-shell ~/source/tmux-open/open.tmux
set -g @open-S 'https://www.google.com/search?q='

# ---------------------- Tmux open sidebar with file tree  ---------------------
# https://github.com/bougui505/tmux_current_tree
bind-key Tab run-shell ~/source/tmux_current_tree/tmux-sidebar.sh

# From: https://goo.gl/LmdY5K
set -g set-titles on
set -g set-titles-string "#{host}:#{pane_current_path}"
set -g status-interval 1

set-window-option -g status-left "[#S:#I.#P] " # Session:Window.Pane
set -g status-right '%Y%m%d_%H%M '

setw -g mode-keys vi

bind C-a last-window
bind | split-window -c '#{pane_current_path}' -h
bind - split-window -c '#{pane_current_path}' -v
bind m command-prompt -p "join pane from:"  "join-pane -s '%%'"
bind s choose-session
bind a send-prefix

# Make tmux forward-word and backward-word with CTRL+arrow
# See http://stackoverflow.com/a/15988701/1679629
set-window-option -g xterm-keys on

# Start windows and panes at 1, not 0
# see: http://unix.stackexchange.com/a/35932/68794
set -g base-index 1
setw -g pane-base-index 1

# Bind Shift-Right and Shift-Left keys to next-window and previous-window respectively.
bind-key -n C-S-Right next-window
bind-key -n C-S-Left previous-window

# Fix escape delay in neovim (see: https://goo.gl/Mddusv)
set -sg escape-time 0

# Smart pane switching with awareness of Vim splits.
# See: https://github.com/christoomey/vim-tmux-navigator
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n 'S-Left' if-shell "$is_vim" 'send-keys S-Left'  'select-pane -L'
bind-key -n 'S-Down' if-shell "$is_vim" 'send-keys S-Down'  'select-pane -D'
bind-key -n 'S-Up' if-shell "$is_vim" 'send-keys S-Up'  'select-pane -U'
bind-key -n 'S-Right' if-shell "$is_vim" 'send-keys S-Right'  'select-pane -R'
tmux_version='$(tmux -V | sed -En "s/^tmux ([0-9]+(.[0-9]+)?).*/\1/p")'
if-shell -b '[ "$(echo "$tmux_version < 3.0" | bc)" = 1 ]' \
    "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\'  'select-pane -l'"
if-shell -b '[ "$(echo "$tmux_version >= 3.0" | bc)" = 1 ]' \
    "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\\\'  'select-pane -l'"

bind-key -T copy-mode-vi 'S-Left' select-pane -L
bind-key -T copy-mode-vi 'S-Down' select-pane -D
bind-key -T copy-mode-vi 'S-Up' select-pane -U
bind-key -T copy-mode-vi 'S-R' select-pane -R

set-option -g history-limit 50000
